from machine import Pin, SPI
import sh1107
import framebuf

# Initialize SPI and SH1107 display
spi = SPI(1, baudrate=10_000_000, sck=Pin(14), mosi=Pin(15), miso=Pin(12))
display = sh1107.SH1107_SPI(128, 64, spi, dc=Pin(21), res=Pin(20), cs=Pin(13))

# Simple 16x16 pixel image (example pattern)
# A 16x16 monochrome image, represented as a byte array
image_data = bytearray([
# 'raspberry-pi-icon-1628x2048-ducluwmb', 32x32px
0x07, 0xf0, 0x0f, 0xe0, 0x38, 0x1c, 0x38, 0x1c, 0x60, 0x02, 0x40, 0x06, 0x60, 0x01, 0x80, 0x06, 
0x20, 0x01, 0x80, 0x04, 0x30, 0x11, 0x88, 0x0c, 0x10, 0x07, 0xe0, 0x08, 0x0c, 0x07, 0xe0, 0x30, 
0x07, 0x1f, 0xf8, 0xe0, 0x03, 0xfc, 0x1f, 0xc0, 0x0c, 0x10, 0x08, 0x30, 0x08, 0x30, 0x0e, 0x10, 
0x18, 0xfc, 0x1f, 0x18, 0x1b, 0x87, 0xe1, 0xc8, 0x1f, 0x01, 0xc0, 0x78, 0x6e, 0x01, 0x80, 0x66, 
0x44, 0x01, 0x80, 0x22, 0xc4, 0x01, 0x80, 0x23, 0x86, 0x03, 0xc0, 0x21, 0xce, 0x07, 0xe0, 0x73, 
0xcf, 0xf8, 0x1f, 0xf3, 0x7f, 0xf0, 0x0f, 0x8e, 0x30, 0xe0, 0x06, 0x0c, 0x30, 0x60, 0x04, 0x0c, 
0x10, 0x30, 0x0c, 0x08, 0x10, 0x18, 0x18, 0x08, 0x08, 0x1e, 0x78, 0x10, 0x06, 0x3f, 0xfc, 0x60, 
0x01, 0xf0, 0x0f, 0x80, 0x00, 0x70, 0x0e, 0x00, 0x00, 0x1c, 0x18, 0x00, 0x00, 0x07, 0xe0, 0x00
])

# Create a framebuffer from the byte data
frame = framebuf.FrameBuffer(image_data, 32, 32, framebuf.MONO_HLSB)

# Clear the display and draw the image
display.fill(0)            # Clear the display
display.blit(frame, 50, 15) # Blit the image at position (56, 24)
display.show()              # Refresh the display to show the image

